buildscript {
    ext.kotlinVersion = '1.3.21'
    repositories {
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
        classpath 'com.github.jengelman.gradle.plugins:shadow:5.0.0'
    }
}

repositories {
    mavenCentral()
}

apply plugin: 'com.github.johnrengelman.shadow'
apply plugin: 'java'
apply plugin: 'kotlin'

def ghidraHome = System.getenv("GHIDRA_HOME")

dependencies {
    compile "org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion"
    shadow fileTree(dir: ghidraHome + '/Ghidra/Framework', include: "**/*.jar")
    shadow fileTree(dir: ghidraHome + '/Ghidra/Features', include: "**/*.jar")
}

compileKotlin {
    kotlinOptions {
        jvmTarget = "1.8"
    }
}

jar {
    manifest {
        attributes(
                'Specification-Title': "Allegrex",
                'Specification-Version': "9.0",
        )
    }
}
